<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Jumbex | Jumbo</title>
    <link rel="stylesheet" type="text/css" href="style3.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <header>
      <a href="index.html"> <i class='bx bx-home-alt-2'></i> Home</a><img src="jumboheader.gif">
    </header>
    <main>
        <div class="page-title">
           <img src="marc.gif">           
        </div>

        <div class="content">  
        <section>
          <div class="categoriageral">
                <h1>Produtos de Higiene</h1>
            <div class="category1">
                <label><h2>Sabonetes</h2> <h4>(apenas 2 unidades por jumbo)</h4></label>
                <div class="subcategory">
                    <form class="formLista">
                        <ul>
                      <li> <img src="albany.png"></label> <input type="checkbox" id="form1_item1" name="form1_item" value="1- Sabonete Albany" data-valor="1.55" data-peso="0.85"><label for="form1_item1"></li>

                        <li> <img src="albany.png"></label> <input type="checkbox" id="form1_item1" name="form1_item" value="1- Sabonete Albany" data-valor="1.55" data-peso="0.85"><label for="form1_item2"></li>

                            <br><br>

                            <li> <img src="protex.png"></label> <input type="checkbox" id="form1_item1" name="form1_item" value="1- Sabonete Protex" data-valor="2.35" data-peso="0.85"><label for="form1_item1"></li>

                        <li> <img src="protex.png"></label> <input type="checkbox" id="form1_item1" name="form1_item" value="1-Sabonete Protex" data-valor="2.35" data-peso="0.85"><label for="form1_item2"></li>


                        
                    </ul>
                    </form>    
                </div>


            </div>
          </div>  
        </section>
        <aside class="fixed-aside">
            <img src="logo.png">
            <div class="box">
                <header>
                    <b>Sua Compra</b><i class='bx bx-cart-download'></i>
                </header>
                <footer>
                    <b>Valor Total:</b> R$<span id="totalValor">0</span></p>
    <p><b>Peso Total:</b></p> <p><span id="totalPeso">0</span>Kg</p>
                    
                </footer>
            </div>
            <button id="finalizar">Finalizar Compra</button>
            <div id="painel">
                <span id="ps"><b>Sua Lista</b></span>
                <p class="pcategory">Higiene</p>

                <div id="itensSelecionadosTodasFormas"></div>
            </div>
        </aside>     
        </div>

    </main>
    

   <script>
    const forms = document.querySelectorAll('.formLista');
    const listaItensSelecionados = document.getElementById('itensSelecionadosTodasFormas');
    const totalValorSpan = document.getElementById('totalValor');
    const totalPesoSpan = document.getElementById('totalPeso');

    forms.forEach(form => {
      const checkboxes = form.querySelectorAll('input[type="checkbox"]');
      let selectedCheckboxes = [];

      checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
          if (this.checked) {
            if (selectedCheckboxes.length < 2) {
              selectedCheckboxes.push(this);
            } else {
              this.checked = false;
            }
          } else {
            const index = selectedCheckboxes.indexOf(this);
            if (index > -1) {
              selectedCheckboxes.splice(index, 1);
            }
          }
          mostrarSelecionados();
        });
      });
    });

    function mostrarSelecionados() {
      let selectedItems = [];
      let totalValor = 0.00;
      let totalPeso = 0.00;

      forms.forEach(form => {
        const selectedCheckboxes = Array.from(form.querySelectorAll('input[type="checkbox"]:checked'));
        selectedItems = selectedItems.concat(selectedCheckboxes.map(checkbox => checkbox.value));
        totalValor += selectedCheckboxes.reduce((acc, checkbox) => acc + parseFloat(checkbox.getAttribute('data-valor')), 0);
        totalPeso += selectedCheckboxes.reduce((acc, checkbox) => acc + parseFloat(checkbox.getAttribute('data-peso')), 0);
      });

      listaItensSelecionados.innerHTML = '';

      selectedItems.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        listaItensSelecionados.appendChild(li);
      });

      totalValorSpan.textContent = totalValor.toFixed(2);
      totalPesoSpan.textContent = totalPeso.toFixed(2);
    }

    // Chamada inicial para exibir itens selecionados ao carregar a p√°gina
    mostrarSelecionados();
</script>


</html>